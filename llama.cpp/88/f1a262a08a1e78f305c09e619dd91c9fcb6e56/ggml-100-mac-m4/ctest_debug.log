+ cmake -DCMAKE_BUILD_TYPE=Debug -DLLAMA_FATAL_WARNINGS=ON -DGGML_METAL=ON -DGGML_METAL_USE_BF16=ON ..
-- The C compiler identification is AppleClang 16.0.0.16000026
-- The CXX compiler identification is AppleClang 16.0.0.16000026
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /Library/Developer/CommandLineTools/usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /Library/Developer/CommandLineTools/usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Git: /usr/bin/git (found version "2.39.5 (Apple Git-154)")
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success
-- Found Threads: TRUE
-- ccache found, compilation results will be cached. Disable with GGML_CCACHE=OFF.
-- CMAKE_SYSTEM_PROCESSOR: arm64
-- Accelerate framework found
-- Could NOT find OpenMP_C (missing: OpenMP_C_FLAGS OpenMP_C_LIB_NAMES) 
-- Could NOT find OpenMP_CXX (missing: OpenMP_CXX_FLAGS OpenMP_CXX_LIB_NAMES) 
-- Could NOT find OpenMP (missing: OpenMP_C_FOUND OpenMP_CXX_FOUND) 
CMake Warning at ggml/src/ggml-cpu/CMakeLists.txt:44 (message):
  OpenMP not found


-- Using llamafile
-- ARM detected
-- Performing Test GGML_COMPILER_SUPPORT_DOTPROD
-- Performing Test GGML_COMPILER_SUPPORT_DOTPROD - Success
-- ARM feature DOTPROD enabled
-- Performing Test GGML_COMPILER_SUPPORT_MATMUL_INT8
-- Performing Test GGML_COMPILER_SUPPORT_MATMUL_INT8 - Success
-- ARM feature MATMUL_INT8 enabled
-- Using runtime weight conversion of Q4_0 to Q4_0_x_x to enable optimized GEMM/GEMV kernels
-- Including CPU backend
-- Looking for dgemm_
-- Looking for dgemm_ - found
-- Found BLAS: /Library/Developer/CommandLineTools/SDKs/MacOSX15.1.sdk/System/Library/Frameworks/Accelerate.framework
-- BLAS found, Libraries: /Library/Developer/CommandLineTools/SDKs/MacOSX15.1.sdk/System/Library/Frameworks/Accelerate.framework
-- BLAS found, Includes: 
-- Including BLAS backend
-- Metal framework found
-- The ASM compiler identification is AppleClang
-- Found assembler: /Library/Developer/CommandLineTools/usr/bin/cc
-- Including METAL backend
-- Configuring done (1.8s)
-- Generating done (0.2s)
-- Build files have been written to: /Users/ggml/work/llama.cpp/build-ci-debug

real	0m2.024s
user	0m0.686s
sys	0m1.083s
++ nproc
+ make -j10
[  0%] Generating build details from Git
[  1%] Building C object examples/gguf-hash/CMakeFiles/sha256.dir/deps/sha256/sha256.c.o
[  1%] Building C object examples/gguf-hash/CMakeFiles/sha1.dir/deps/sha1/sha1.c.o
[  2%] Building C object ggml/src/CMakeFiles/ggml-base.dir/ggml.c.o
[  2%] Building C object ggml/src/CMakeFiles/ggml-base.dir/ggml-alloc.c.o
[  3%] Building CXX object ggml/src/CMakeFiles/ggml-base.dir/ggml-backend.cpp.o
[  4%] Building C object ggml/src/CMakeFiles/ggml-base.dir/ggml-quants.c.o
[  5%] Building CXX object ggml/src/CMakeFiles/ggml-base.dir/ggml-opt.cpp.o
[  5%] Building CXX object ggml/src/CMakeFiles/ggml-base.dir/ggml-threading.cpp.o
[  6%] Building C object examples/gguf-hash/CMakeFiles/xxhash.dir/deps/xxhash/xxhash.c.o
-- Found Git: /usr/bin/git (found version "2.39.5 (Apple Git-154)")
[  6%] Built target sha1
[  6%] Building C object ggml/src/CMakeFiles/ggml-base.dir/ggml-aarch64.c.o
[  6%] Built target sha256
[  6%] Built target xxhash
[  7%] Linking CXX shared library libggml-base.dylib
[  8%] Building CXX object common/CMakeFiles/build_info.dir/build-info.cpp.o
[  8%] Built target ggml-base
[  8%] Generate assembly for embedded Metal library
Embedding Metal library
[  8%] Building CXX object ggml/src/ggml-blas/CMakeFiles/ggml-blas.dir/ggml-blas.cpp.o
[  9%] Building CXX object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/ggml-cpu.cpp.o
[  9%] Building C object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/ggml-cpu-aarch64.c.o
[  9%] Building C object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/ggml-cpu.c.o
[ 11%] Building C object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/ggml-cpu-quants.c.o
[ 11%] Building CXX object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/amx/mmq.cpp.o
[ 11%] Building CXX object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/llamafile/sgemm.cpp.o
[ 11%] Building CXX object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/amx/amx.cpp.o
[ 12%] Built target build_info
[ 12%] Building CXX object ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/cpu-feats-x86.cpp.o
[ 13%] Linking CXX shared library libggml-blas.dylib
[ 13%] Building ASM object ggml/src/ggml-metal/CMakeFiles/ggml-metal.dir/__/__/__/autogenerated/ggml-metal-embed.s.o
[ 14%] Building C object ggml/src/ggml-metal/CMakeFiles/ggml-metal.dir/ggml-metal.m.o
[ 14%] Built target ggml-blas
[ 15%] Linking C shared library libggml-metal.dylib
[ 15%] Built target ggml-metal
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:90:15: error: invalid output constraint '=a' in asm
   90 |             : "=a"(cpu_info[0]), "=b"(cpu_info[1]), "=c"(cpu_info[2]), "=d"(cpu_info[3])
      |               ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:96:15: error: invalid output constraint '=a' in asm
   96 |             : "=a"(cpu_info[0]), "=b"(cpu_info[1]), "=c"(cpu_info[2]), "=d"(cpu_info[3])
      |               ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:185:6: error: no previous prototype for function 'test_is' [-Werror,-Wmissing-prototypes]
  185 | void test_is() {
      |      ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:185:1: note: declare 'static' if the function is not intended to be used outside of this translation unit
  185 | void test_is() {
      | ^
      | static 
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:266:5: error: use of undeclared identifier '__builtin_cpu_init'; did you mean '__builtin_isfinite'?
  266 |     __builtin_cpu_init();
      |     ^~~~~~~~~~~~~~~~~~
      |     __builtin_isfinite
/Library/Developer/CommandLineTools/SDKs/MacOSX15.1.sdk/usr/include/c++/v1/__math/traits.h:50:10: note: '__builtin_isfinite' declared here
   50 |   return __builtin_isfinite((typename __promote<_A1>::type)__x);
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:266:24: error: too few arguments to function call, expected 1, have 0
  266 |     __builtin_cpu_init();
      |     ~~~~~~~~~~~~~~~~~~~^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:267:10: error: use of undeclared identifier '__builtin_cpu_supports'
  267 |     if (!__builtin_cpu_supports("fma") && ggml_cpu_has_fma()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:268:10: error: use of undeclared identifier '__builtin_cpu_supports'
  268 |     if (!__builtin_cpu_supports("f16c") && ggml_cpu_has_f16c()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:269:10: error: use of undeclared identifier '__builtin_cpu_supports'
  269 |     if (!__builtin_cpu_supports("ssse3") && ggml_cpu_has_ssse3()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:270:10: error: use of undeclared identifier '__builtin_cpu_supports'
  270 |     if (!__builtin_cpu_supports("sse3") && ggml_cpu_has_sse3()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:271:10: error: use of undeclared identifier '__builtin_cpu_supports'
  271 |     if (!__builtin_cpu_supports("avx") && ggml_cpu_has_avx()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:272:10: error: use of undeclared identifier '__builtin_cpu_supports'
  272 |     if (!__builtin_cpu_supports("avx2") && ggml_cpu_has_avx2()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:273:10: error: use of undeclared identifier '__builtin_cpu_supports'
  273 |     if (!__builtin_cpu_supports("avx512f") && ggml_cpu_has_avx512()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:274:10: error: use of undeclared identifier '__builtin_cpu_supports'
  274 |     if (!__builtin_cpu_supports("avx512bf16") && ggml_cpu_has_avx512_bf16()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:275:10: error: use of undeclared identifier '__builtin_cpu_supports'
  275 |     if (!__builtin_cpu_supports("avx512vnni") && ggml_cpu_has_avx512_vnni()) return 0;
      |          ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:252:5: error: no previous prototype for function 'get_score' [-Werror,-Wmissing-prototypes]
  252 | int get_score() {
      |     ^
/Users/ggml/work/llama.cpp/ggml/src/ggml-cpu/cpu-feats-x86.cpp:252:1: note: declare 'static' if the function is not intended to be used outside of this translation unit
  252 | int get_score() {
      | ^
      | static 
15 errors generated.
make[2]: *** [ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/cpu-feats-x86.cpp.o] Error 1
make[1]: *** [ggml/src/ggml-cpu/CMakeFiles/ggml-cpu.dir/all] Error 2
make: *** [all] Error 2
